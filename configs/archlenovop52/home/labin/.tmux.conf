# Prefix key is Ctrl-a
unbind C-b
set -g prefix C-a
bind C-a send-prefix

# Escape time
set -sg escape-time 0

# Mouse support
setw -g mouse on

# Activity monitoring
setw -g monitor-activity on
set -g visual-activity on

# store more of buffer history
set -g history-limit 10000 # Increase the scrollback history

# Dont show child process name as window name
set -g allow-rename off

# Vim-style copy mode and clipboard integration
unbind [
bind Escape copy-mode

# use vi-line shortcuts to yank text in copy-mode
bind -T copy-mode-vi v send-keys -X begin-selection
bind -T copy-mode-vi V send-keys -X select-line
bind -T copy-mode-vi C-v send-keys -X rectangle-toggle

# Copy to system clipboard
bind -T copy-mode-vi y send -X copy-pipe-and-cancel "wl-copy && wl-paste -n | wl-copy -p" \; display-message "Copied to clipboard."

# Paste from system clipboard
unbind p
bind p run "wl-paste -n | tmux load-buffer - ; tmux paste-buffer" \; display-message "Pasted from clipboard"

# reload config (prefix + r)
bind r source-file ~/.tmux.conf \; display-message "Configuration reloaded!"

# Vi mode for copy mode and status keys
set -g mode-keys vi
set -g status-keys vi

# rebind vertical and horizontal splitting shortcuts
# left-right
unbind '%'
bind "\\" split-window -c "#{pane_current_path}" -h
# top-bottom
unbind '"'
bind '-' split-window -c "#{pane_current_path}" -v
# new window
bind c new-window -c "#{pane_current_path}"

# replace prefix+n/p keys with prefix+<c-n>/<c-p>
unbind n
bind-key C-n next-window
bind-key C-p previous-window

# toggle between two last visited windows
bind-key C-Space last-window

# move between panes using prefix + h/j/k/l
bind h select-pane -L \; display-pane -d 2000
bind j select-pane -D \; display-pane -d 2000
bind k select-pane -U \; display-pane -d 2000
bind l select-pane -R \; display-pane -d 2000

# resize pane using prefix + H/J/K/L
bind -r C-h resize-pane -L 5 \; display-pane -d 2000
bind -r C-j resize-pane -D 5 \; display-pane -d 2000
bind -r C-k resize-pane -U 5 \; display-pane -d 2000
bind -r C-l resize-pane -R 5 \; display-pane -d 2000

# Fuzzy session switcher
bind C-s new-window -n "session-switcher" 'bash -c "source ~/.bashrc.d/fzf.bashrc ; fztmx"'

# Status bar customization
set -g status-position top
set -g status-justify left
set -g status-style bg=terminal,fg=terminal
set -g status-interval 1   # Update interval for status line

# Status left configuration
set -g status-left-length 50
set -g status-left '#[bold,bg=#1b7c83,fg=#ffffff]#{?client_prefix,#[bg=#cf222e]#[fg=#ffffff],} #{session_name} '
set -ga status-left '#[bg=terminal] ' # Add space after session name

# Window status customization
set-window-option -g window-status-separator ' '
set -g window-status-current-format "#[bold,bg=#1b7c83,fg=#ffffff] #{window_index}:#{window_name}#{window_flags} " # Format for the currently active window
set -g window-status-format "#[bg=#6e7781,fg=#ffffff] #{window_index}#{window_flags} "                             # Format for inactive windows

# Status right configuration
set -g status-right-length 150
set -g status-right '#[bold]'
set -ga status-right '#{?pane_in_mode,#[bg=#4d2d00]#[fg=#ffffff] #{pane_mode} ,#[bg=#633c01]#[fg=#ffffff] normal-mode }#[bg=terminal] ' # Display tmux mode
set -ga status-right '#{?window_zoomed_flag,#[bg=#cf222e]#[fg=#ffffff][+]#[bg=terminal] ,}' # Display window zoom status
set -ga status-right '#[bg=#1a7f37,fg=#ffffff] #(tmux-mem-cpu-load) #[bg=terminal] '
set -ga status-right '#[bg=#1b7c83,fg=#ffffff] #(whoami)@#(hostnamectl --transient) '

# Panes customization
set -g display-panes-colour "#6e7781"
set -g display-panes-active-colour "#0969da"
# Pane borders customization
set -g pane-border-indicators both
set -g pane-border-lines single
set -g pane-border-status top
set -g pane-border-format '#{pane_index}'
set -g pane-border-style fg="#6e7781"
set -g pane-active-border-style fg="#0969da"

# Mode style (highlighting)
set -g mode-style "fg=#ffffff,bg=#1b7c83" # White on cyan

# Menu styles
set -g menu-style "bold,fg=#1f2328"
set -g menu-selected-style "bold,fg=#ffffff,bg=#0969da"
set -g menu-border-style "fg=#6e7781"
set -g menu-border-lines "single"

# Message text customization
set -g message-style bg='#cf222e',fg='#ffffff'
